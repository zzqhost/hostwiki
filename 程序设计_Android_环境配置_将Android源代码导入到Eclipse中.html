<html>
  <head>
    <title>将Android源代码导入到Eclipse中</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="Stylesheet" type="text/css" href="cssandjs/style.css" />
</head>


<body>


<div id="container">
    <div id="header">张志强的wiki</div>
    <br class="clearfloat" />
    <div id="content">
<p>
<a href="index.html">首页</a>
</p>


<h1 id="toc_1"> 将Android源代码导入到Eclipse中</h1>

<div class="toc">
<ul>
<li><a href="#toc_1"> 将Android源代码导入到Eclipse中</a>
<ul>
<li><a href="#toc_1.1">1. 说明</a>
<li><a href="#toc_1.2">2. 步骤</a>
</ul>
</ul>
</div>

<h2 id="toc_1.1">1. 说明</h2>
<p>
研究Android上层代码，最便捷的方式无疑是将它们导入到Eclipse中来进行查看，包括感兴趣的各种App，及frameworks中的代码等，下面就将此步骤详细说明一下：
</p>

<h2 id="toc_1.2">2. 步骤</h2>
<ol>
<li>
把Android代码的Eclipse工程配置文件复制到android源码根目录下

<ul>
<li>
$ cp development/ide/eclipse/.classpath ./

</ul>
<li>
修改eclipse程序的配置 

<ul>
<li>
修改eclipse缓存设置: 把eclipse.ini（在eclipse软件的安装目录下）的3个值改为下面的值

<ul>
<li>
-Xms128m 

<li>
-Xmx512m

<li>
-XX:MaxPermSize=256m

<li>
说明

<ul>
<li>
JVM堆的设置是指java程序运行过程中JVM可以调配使用的内存空间的设置.

<li>
JVM在启动的时候会自动设置Heap size的值

<li>
其初始空间(即-Xms)是物理内存的1/64，最大空间(-Xmx)是物理内存的1/4。可以利用JVM提供的-Xmn -Xms -Xmx等选项可进行设置。

<li>
如果在导入过程中出现 java heap space， 可以尝试把上面的值改大， 我在导入Android4.1代码时就发生了此错误。

</ul>
</ul>
<li>
修改Eclipse的代码风格等：

<ul>
<li>
相关文件介绍

<ul>
<li>
可以简单的将android-formatting.xml和android.importorder导入eclipse 

<li>
位置： android-formatting.xml、.classpath和android.importorder都放在development/ide/eclipse/下

<li>
android-formatting.xml用来配置eclipse编辑器的代码风格

<li>
android.importorder用来配置eclipse的import的顺序和结构。 

</ul>
<li>
导入方法

<ul>
<li>
在window-&gt;preferences-&gt;java-&gt;Code style-&gt;Formatter中导入android-formatting.xml 

<li>
在window-&gt;preferences-&gt;java-&gt;Code style-&gt;Organize Imports中导入android.importorder 

</ul>
</ul>
</ul>
<li>
把android源码作为一个工程导入eclipse

<ul>
<li>
注意：导入前先检查.classpath里的文件在android源码中是否有相应的文件（文件夹），否则会破坏android源码（一般是多添加文件/文件夹），.classpath里多余的路径可删除 

<li>
最好重新换一个workspace，因为源码是比较庞大的。新建Java Project(不是android project，否则会破坏android源码)，指定一个name，接着将use default location勾掉，指定到你源码的目录下，finish。

</ul>
</ol>
</div>
    <br class="clearfloat" />


    <div id="disqus_thread"></div>
    <script type="text/javascript" src="cssandjs/javascript/tongjianddisqus.js"></script>

    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    <div id="footer">
            zzqhost&nbsp;&copy;&nbsp;2012-2013&nbsp;
            <a href="http://www.zzqhost.com" target="_blank">www.zzqhost.com</a>
            <br>
            Generated by
            <a href="http://www.vim.org" target="_blank">Vim</a>
            &amp;
            <a href="http://code.google.com/p/vimwiki/" target="_blank">Vimwiki</a>
    </div>

</div>

</body>
</html>
