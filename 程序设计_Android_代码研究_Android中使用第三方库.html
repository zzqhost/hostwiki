<html>
  <head>
    <title>Android中使用第三方库</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="Stylesheet" type="text/css" href="cssandjs/style.css" />
</head>


<body>


<div id="container">
    <div id="header">张志强的wiki</div>
    <br class="clearfloat" />
    <div id="content">
<p>
<a href="index.html">首页</a>
</p>
<h1 id="toc_1"> Android中使用第三方库</h1>

<div class="toc">
<ul>
<li><a href="#toc_1"> Android中使用第三方库</a>
<ul>
<li><a href="#toc_1.1">1. 两个编译宏</a>
<li><a href="#toc_1.2">2. 示例</a>
</ul>
</ul>
</div>

<h2 id="toc_1.1">1. 两个编译宏</h2>
<ul>
<li>
如果在编译Android之前已经有编译好的库或者配置文件时，如何加入到Android中呢？

<li>
Android提供了Prebuilt编译方法，两个文件prebuilt.mk和multi_prebuilt.mk，对应的方法宏是BUILD_PREBUILT和 BUILD_MULTI_PREBUILT。

<ul>
<li>
prebuilt.mk就是prebuilt的具体实现，它是针对独立一个文件的操作

<li>
multi_prebuilt.mk是针对多个文件的，它对多个文件进行判断，然后调用prebuilt对独立一个文件进行处理。

</ul>
<li>
如果直接用prebuilt.mk的话还是比较麻烦的，得仔细看好需要的宏，

<li>
如果使用multi_prebuilt.mk会更方便些，很多它都帮忙处理了。

</ul>

<h2 id="toc_1.2">2. 示例</h2>
<ul>
<li>
示例1
<pre>

## prebuilt etc
#include $(CLEAR_VARS)
#LOCAL_MODULE := 
#LOCAL_MODULE_TAGS := eng
#LOCAL_MODULE_CLASS :=

#LOCAL_MODULE_PATH := 
#LOCAL_SRC_FILES := 
#include $(BUILD_MULTI_PREBUILT)

## prebuilt so/a


include $(CLEAR_VARS)
LOCAL_PREBUILT_LIBS := *.so/*.a 
include $(BUILD_MULTI_PREBUILT)



更容易的方式是：

$(call add-prebuilt-files, ETC, pv_player.cfg)

它会将pv_player.cfg copy to system/etc下，还可以设定类型：

ETC,APPS,EXECUTABLES,SHARED_LIBRARIES,STATIC_LIBRARIES
 

add-prebuilt-files的定义是在build/core/definitions.mk下

</pre>

</ul>

<ul>
<li>
示例2
<pre>
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS) 
LOCAL_MODULE_TAGS := optional
LOCAL_PREBUILT_LIBS := libmovextractor.so
include $(BUILD_MULTI_PREBUILT)
</pre>

</ul>
</div>
    <br class="clearfloat" />


    <div id="disqus_thread"></div>
    <script type="text/javascript" src="cssandjs/javascript/tongjianddisqus.js"></script>

    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    <div id="footer">
            zzqhost&nbsp;&copy;&nbsp;2012-2013&nbsp;
            <a href="http://www.zzqhost.com" target="_blank">www.zzqhost.com</a>
            <br>
            Generated by
            <a href="http://www.vim.org" target="_blank">Vim</a>
            &amp;
            <a href="http://code.google.com/p/vimwiki/" target="_blank">Vimwiki</a>
    </div>

</div>

</body>
</html>
